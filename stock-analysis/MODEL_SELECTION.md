# AI模型选择功能说明

## 功能概述

系统现已支持**7种OpenAI模型**，用户可以根据需求灵活选择：
- 推理模型（o1系列）
- GPT-4o系列（推荐）
- GPT-4系列
- GPT-3.5系列

## 可用模型对比

### 推理模型（Reasoning）

#### o1
- **定位**: 最强推理能力
- **成本**: ~$0.015/次（约￥0.11）
- **速度**: 较慢（深度推理）
- **适用场景**:
  - 复杂的金融模型分析
  - 需要深度推理的场景
  - 多维度综合判断
- **会员要求**: 需要Plus或API Tier 5

#### o1-mini
- **定位**: 快速推理
- **成本**: ~$0.003/次（约￥0.02）
- **速度**: 中等
- **适用场景**:
  - 需要一定推理能力
  - 预算适中的场景
- **会员要求**: 需要Plus或API Tier 3

### GPT-4o系列（推荐）

#### GPT-4o ⭐
- **定位**: 多模态旗舰
- **成本**: ~$0.005/次（约￥0.04）
- **速度**: 快速（1-2秒）
- **适用场景**:
  - **推荐使用**：速度与能力兼具
  - 日常量价分析
  - 需要快速响应的场景
- **会员要求**: 无

#### GPT-4o-mini ⭐（默认）
- **定位**: 高性价比
- **成本**: ~$0.0002/次（约￥0.0015）
- **速度**: 很快（1-2秒）
- **适用场景**:
  - **推荐使用**：性价比极高
  - 批量分析
  - 频繁调用
- **会员要求**: 无

### GPT-4系列

#### GPT-4 Turbo
- **定位**: 长上下文
- **成本**: ~$0.01/次（约￥0.07）
- **速度**: 中等（2-3秒）
- **适用场景**:
  - 需要更长上下文
  - 知识更新至2024年
- **会员要求**: 无

#### GPT-4
- **定位**: 标准版
- **成本**: ~$0.03/次（约￥0.22）
- **速度**: 较慢（3-5秒）
- **适用场景**:
  - 需要最强能力
  - 预算充足
- **会员要求**: 无

### GPT-3.5系列

#### GPT-3.5 Turbo
- **定位**: 极致性价比
- **成本**: ~$0.0001/次（约￥0.0007）
- **速度**: 极快（<1秒）
- **适用场景**:
  - 简单分析
  - 成本敏感
  - 大量调用
- **会员要求**: 无

## 使用指南

### 1. 配置步骤

1. **点击顶部"⚙️ AI配置"按钮**
2. **输入OpenAI API密钥**（格式：sk-proj-...）
3. **选择AI模型**（下拉菜单）
4. **查看模型信息卡片**（自动显示选中模型的详细信息）
5. **点击"💾 保存配置"**

### 2. 顶部状态显示

配置完成后，页面顶部会实时显示：
- **当前模型**: 例如"当前模型：GPT-4o"
- **配置状态**: "✓ 已配置"（绿色）或"未配置API密钥"

### 3. 切换模型

随时可以：
1. 点击"⚙️ AI配置"
2. 选择新的模型
3. 保存即可生效

## 模型选择建议

### 日常使用（推荐）
```
GPT-4o-mini
- 成本极低：6个指数批量分析仅需 $0.001
- 速度很快：单次1-2秒
- 能力充足：满足量价分析需求
```

### 高质量分析
```
GPT-4o
- 成本适中：6个指数批量分析约 $0.03
- 速度快：单次1-2秒
- 能力强大：多模态旗舰
```

### 深度研究（预算充足）
```
o1
- 成本较高：6个指数批量分析约 $0.09
- 推理深度：多步骤逻辑分析
- 适合：复杂金融模型研究
```

### 极致省钱
```
GPT-3.5 Turbo
- 成本极低：6个指数批量分析约 $0.0006
- 速度极快：<1秒
- 适合：简单分析、测试
```

## 成本对比（批量分析6个指数）

| 模型 | 单次成本 | 6次成本 | 月100次成本 | 适用场景 |
|------|---------|---------|------------|---------|
| o1 | $0.015 | $0.09 | $9.00 | 深度研究 |
| o1-mini | $0.003 | $0.018 | $1.80 | 中级分析 |
| **GPT-4o** ⭐ | $0.005 | $0.03 | $3.00 | **推荐** |
| **GPT-4o-mini** ⭐ | $0.0002 | $0.001 | $0.12 | **默认推荐** |
| GPT-4 Turbo | $0.01 | $0.06 | $6.00 | 长上下文 |
| GPT-4 | $0.03 | $0.18 | $18.00 | 标准版 |
| GPT-3.5 Turbo | $0.0001 | $0.0006 | $0.06 | 极致省钱 |

## 会员要求说明

### 无需会员（大部分模型）
- GPT-4o系列 ✅
- GPT-4系列 ✅
- GPT-3.5系列 ✅

只需有效的API密钥即可使用

### 需要Plus会员或高Tier
- **o1**: 需要Plus订阅 或 API Tier 5
- **o1-mini**: 需要Plus订阅 或 API Tier 3

> 查看你的API Tier：https://platform.openai.com/settings/organization/limits

## 技术实现

### localStorage存储
```javascript
// 存储用户选择
localStorage.setItem('openai_model', 'gpt-4o-mini');
localStorage.setItem('openai_api_key', 'sk-...');

// 读取配置
const model = getCurrentModel();
const apiKey = getOpenAIKey();
```

### 实时更新
- 保存后立即更新顶部显示
- 下次分析自动使用新模型
- 无需刷新页面

### API调用
```javascript
// 自动使用用户选择的模型
const selectedModel = getCurrentModel();

fetch('https://api.openai.com/v1/chat/completions', {
  body: JSON.stringify({
    model: selectedModel,  // 动态模型
    messages: [...]
  })
});
```

## 常见问题

### Q1: 如何选择模型？
**A**:
- 新手/预算有限：**GPT-4o-mini**（默认）
- 追求速度和质量：**GPT-4o**
- 深度研究：**o1**

### Q2: 模型切换会影响已有分析吗？
**A**: 不会。已生成的分析不受影响，只影响新的分析请求。

### Q3: 某些模型提示"权限不足"？
**A**:
- o1/o1-mini需要Plus会员或更高API Tier
- 其他模型无此限制
- 建议先用GPT-4o系列

### Q4: 如何查看我的API使用量？
**A**: 访问 [OpenAI Usage Dashboard](https://platform.openai.com/usage)

### Q5: 模型配置保存在哪里？
**A**: 仅保存在你的浏览器localStorage，不会上传到服务器。清除浏览器数据会丢失配置。

## 更新日志

### 2025-11-10
- ✅ 支持7种OpenAI模型选择
- ✅ 实时显示当前模型和配置状态
- ✅ 模型信息卡片动态更新
- ✅ 模型切换即时生效
- ✅ 详细的成本和速度对比

## 反馈与建议

如需添加其他模型支持，欢迎提Issue或PR！
