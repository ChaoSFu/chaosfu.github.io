# 本地验证清单

## 🔍 功能验证步骤

### ✅ 第一步：查看页面顶部AI区域

**预期效果**：
- [ ] 看到紫色渐变的AI分析区域
- [ ] 显示"🤖 AI量价分析"标题
- [ ] 显示"当前模型：GPT-4o-mini"
- [ ] 显示"未配置API密钥"（首次访问）
- [ ] 右侧有白色的"⚙️ API配置"按钮

**实际效果**：
```
页面顶部应该是这样的：
┌─────────────────────────────────────────────────┐
│ 🤖 AI量价分析              ⚙️ API配置          │
│ 当前模型：GPT-4o-mini | 未配置API密钥           │
└─────────────────────────────────────────────────┘
```

---

### ✅ 第二步：打开AI配置弹窗

**操作**：点击"⚙️ API配置"按钮

**预期效果**：
- [ ] 弹出模态框（半透明黑色背景）
- [ ] 看到"⚙️ AI分析设置"标题
- [ ] 有API密钥输入框（placeholder: sk-proj-...）
- [ ] 有"选择AI模型"下拉菜单
- [ ] 默认选中"GPT-4o-mini - 高性价比（默认）"
- [ ] 看到模型信息卡片显示GPT-4o-mini的详情

**模型信息卡片应显示**：
```
GPT-4o-mini [推荐标签]
💰 成本：约 $0.0002/次
⚡ 速度：很快（1-2秒）
🎯 适用：日常量价分析，性价比极高
```

---

### ✅ 第三步：测试模型切换

**操作**：点击模型下拉菜单，选择不同模型

**测试选项**：
1. **选择 o1**
   - [ ] 信息卡片更新为：
     - 💰 成本：约 $0.015/次
     - ⚡ 速度：较慢（深度推理）
     - 🎯 适用：最强推理能力，适合复杂金融分析
   - [ ] 无"推荐"标签

2. **选择 GPT-4o**
   - [ ] 信息卡片更新为：
     - 💰 成本：约 $0.005/次
     - ⚡ 速度：快速（1-2秒）
     - 🎯 适用：多模态旗舰模型，速度与能力兼具
   - [ ] 有"推荐"标签

3. **选择 GPT-3.5 Turbo**
   - [ ] 信息卡片更新为：
     - 💰 成本：约 $0.0001/次
     - ⚡ 速度：极快（<1秒）
     - 🎯 适用：极致性价比，适合简单分析
   - [ ] 无"推荐"标签

**预期效果**：
- [ ] 每次切换模型，信息卡片立即更新
- [ ] 显示对应模型的准确信息

---

### ✅ 第四步：测试模型保存（无API密钥）

**操作**：
1. 选择"GPT-4o"
2. 点击"💾 保存配置"按钮

**预期效果**：
- [ ] 弹出提示："模型已设置为：GPT-4o"
- [ ] 模态框关闭
- [ ] 页面顶部更新为："当前模型：GPT-4o"
- [ ] API状态仍显示"未配置API密钥"

---

### ✅ 第五步：测试API密钥保存

**操作**：
1. 再次点击"⚙️ API配置"
2. 输入测试密钥：`sk-test-1234567890`
3. 选择"GPT-4o-mini"
4. 点击"💾 保存配置"

**预期效果**：
- [ ] 弹出提示："API密钥已保存！\n模型已设置为：GPT-4o-mini"
- [ ] 模态框关闭
- [ ] 页面顶部更新为：
  - "当前模型：GPT-4o-mini"
  - "✓ 已配置"（绿色文字）

---

### ✅ 第六步：验证配置持久化

**操作**：
1. 刷新页面（F5 或 Cmd+R）

**预期效果**：
- [ ] 页面加载后，顶部仍显示：
  - "当前模型：GPT-4o-mini"
  - "✓ 已配置"（绿色）
- [ ] 再次打开"⚙️ API配置"
- [ ] API密钥输入框显示：`sk-test-1234567890`
- [ ] 模型选择器仍选中"GPT-4o-mini"

---

### ✅ 第七步：查看主要指数看板

**操作**：向下滚动到"主要指数看板"区域

**预期效果**：
- [ ] 看到6个指数卡片（网格布局）：
  1. 中证100（超大盘）
  2. 上证50（超大盘）
  3. 沪深300（大盘）
  4. 中证500（中盘）
  5. 中证1000（小盘）
  6. 中证2000（微盘）

- [ ] 每个卡片显示：
  - 指数名称 + 类型标签
  - 涨跌幅（红色或绿色）
  - 成交额（亿元）
  - 特征描述

- [ ] 标题旁有"✨ 一键生成AI分析"按钮

---

### ✅ 第八步：测试一键批量分析（无有效API密钥）

**操作**：
1. 点击"✨ 一键生成AI分析"按钮

**预期效果**：
- [ ] 弹出提示框：
  ```
  请先配置OpenAI API密钥！

  点击页面顶部的"⚙️ API配置"按钮进行配置。
  ```
- [ ] 不会发起API请求

---

### ✅ 第九步：测试模态框关闭

**操作**：
1. 点击"⚙️ API配置"打开模态框
2. 点击模态框外的黑色半透明区域

**预期效果**：
- [ ] 模态框关闭
- [ ] 返回主页面

**操作2**：
1. 再次打开模态框
2. 点击"取消"按钮

**预期效果**：
- [ ] 模态框关闭
- [ ] 输入框内容清空

---

### ✅ 第十步：测试响应式布局

**操作**：
1. 缩小浏览器窗口宽度

**预期效果**：
- [ ] 顶部AI区域在窄屏下换行
- [ ] 指数卡片网格自动调整（1列或2列）
- [ ] 模态框在小屏幕下居中显示
- [ ] 所有内容可正常阅读和操作

---

### ✅ 第十一步：浏览器控制台检查

**操作**：
1. 打开浏览器开发者工具（F12或Cmd+Option+I）
2. 切换到Console标签

**预期效果**：
- [ ] 看到启动日志：
  ```
  🚀 A股板块热度分析系统 - 启动中...
  ✅ 系统初始化完成
  ```
- [ ] 没有红色错误信息
- [ ] 可能有CORS警告（正常，因为东方财富API限制）

**检查localStorage**：
1. 切换到Application标签
2. 展开localStorage
3. 选择http://localhost:8006

**预期看到**：
- [ ] `openai_api_key`: "sk-test-1234567890"
- [ ] `openai_model`: "gpt-4o-mini"

---

## 🎨 视觉效果验证

### 顶部AI区域
- [ ] 紫色渐变背景（从#667eea到#764ba2）
- [ ] 白色文字清晰可读
- [ ] "⚙️ API配置"按钮有悬停效果（上移+阴影）

### 模态框
- [ ] 半透明黑色背景遮罩
- [ ] 白色卡片居中显示
- [ ] 圆角边框（12px）
- [ ] 模型选择器有分组标签（optgroup）

### 指数卡片
- [ ] 浅灰色渐变背景
- [ ] 悬停时轻微上移+阴影效果
- [ ] 涨跌幅颜色正确（红涨绿跌）
- [ ] 类型标签颜色区分：
  - 超大盘：蓝色
  - 大盘：浅蓝色
  - 中盘：橙色
  - 小盘：红色
  - 微盘：粉色

---

## 🐛 常见问题排查

### 问题1：顶部不显示"✓ 已配置"
**原因**：可能是localStorage未正确保存
**解决**：
1. 打开开发者工具 → Application → localStorage
2. 检查是否有`openai_api_key`
3. 如果没有，重新保存API密钥

### 问题2：模型信息卡片不更新
**原因**：JavaScript事件监听未正确绑定
**解决**：
1. 刷新页面
2. 打开控制台检查是否有错误
3. 确保app.js正确加载

### 问题3：样式显示异常
**原因**：CSS未加载或被缓存
**解决**：
1. 硬刷新：Ctrl+Shift+R（Windows）或 Cmd+Shift+R（Mac）
2. 检查Network标签，确认styles.css已加载

### 问题4：点击按钮无反应
**原因**：JavaScript错误
**解决**：
1. 打开控制台查看错误信息
2. 确认app.js文件完整加载
3. 检查是否有语法错误

---

## ✅ 验证完成标准

以上11个步骤全部通过，即表示功能正常！

**核心功能清单**：
- ✅ 顶部AI区域正确显示
- ✅ 模型选择器工作正常
- ✅ 模型信息卡片动态更新
- ✅ 配置保存和读取正常
- ✅ localStorage持久化有效
- ✅ 页面刷新后配置保持
- ✅ 指数看板正确渲染
- ✅ 一键批量分析按钮功能正常
- ✅ 响应式布局适配
- ✅ 无JavaScript错误

---

## 📝 验证记录

请在验证过程中记录：

**通过的步骤**：
```
□ 第一步：页面顶部AI区域
□ 第二步：打开AI配置弹窗
□ 第三步：测试模型切换
□ 第四步：测试模型保存
□ 第五步：测试API密钥保存
□ 第六步：验证配置持久化
□ 第七步：查看主要指数看板
□ 第八步：测试一键批量分析
□ 第九步：测试模态框关闭
□ 第十步：测试响应式布局
□ 第十一步：浏览器控制台检查
```

**发现的问题**：
```
（记录此处）
```

**截图位置**：
```
可以截图保存关键界面：
1. 顶部AI区域
2. AI配置模态框
3. 指数看板
4. localStorage数据
```
